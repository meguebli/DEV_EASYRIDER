<script src="https://js.pusher.com/4.1/pusher.min.js"></script>
    <script>
        var pusher = new Pusher('335566aa9e743a920327', { cluster: 'eu' });
    
        // retrieve the socket ID once we're connected
        pusher.connection.bind('connected', function () {
            // attach the socket ID to all outgoing Axios requests
            axios.defaults.headers.common['X-Socket-Id'] = pusher.connection.socket_id;
        });
    
        // request permission to display notifications, if we don't alreay have it
        Notification.requestPermission();
        pusher.subscribe('notifications')
                .bind('post_updated', function (post) {
                    // if we're on the home page, show an "Updated" badge
                    if (window.location.pathname === "/") {
                        $('a[href="/posts/' + post._id + '"]').append('<span class="badge badge-primary badge-pill">Updated</span>');
                    }
                    var notification = new Notification(post.title + " was just updated. Check it out.");
                    notification.onclick = function (event) {
                        window.location.href = '/posts/' + post._id;
                        event.preventDefault();
                        notification.close();
                    }
                });
    </script>